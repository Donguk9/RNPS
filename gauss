headers = {
  "x-generative-ai-client": YOUR_CLIENT_KEY,
  "x-openapi-token": YOUR_PASS_KEY,
  "x-generative-ai-user-email": YOUR_EMAIL
}

import requests as requests
models_api_endpoint_url = f"{ENDPOINT_URL}/openapi/chat/v1/models"


def model_read():
    response=requests.get(
        models_api_endpoint_url,
        headers=headers
    )
    print(response.json())

    
def nps_sum(text):    
    body = {
    "modelIds": [YOUR_MODEL_ID],
    "contents": ["""
                 The following data concerns Repair NPS (Net Promoter Score).
                 
                 Summarize and organize the following data for easy understanding.
                 
                 - ALL OUTPUT MUST BE IN ENGLISH, regardless of the input language.
                 - Provide a clear and concise summary.
                 -------------------------------DATA-------------------------
                 """ + text],
    "llmConfig": {
        "max_new_tokens": 4096,
        "seed": None,
        "top_k": 14,
        "top_p": 0.94,
        "temperature": 0.01,
        "repetition_penalty": 1.04
    },
    "isStream": False,
    "systemPrompt":"""
    # Role
    - You are an expert data analyst.
    
    # Instructions
    - Summarize the provided NPS data and include a very brief analysis.
    - ALL output must be written in ENGLISH.
    - Provide the output in narrative form using Markdown syntax.
    - Do not include any text other than the summary/analysis results.
    """
    }

    api_endpoint_url = f"{ENDPOINT_URL}/openapi/chat/v1/messages"

    response=requests.post(
        api_endpoint_url,
        headers=headers,
        json=body
    )
    return response.json()["content"]


def sm_global(a):
    body = {
    "modelIds": [YOUR_MODEL_ID],
    "contents": ["""
                You will be provided with NPS information. This is the Repair satisfaction score measured by each subsidiary.
                Analyze this data and write an analysis report.
                
                - THE ENTIRE ANALYSIS MUST BE OUTPUT IN ENGLISH ONLY.
                - Even if the input data or reviews are in Korean, the analysis and summary must be in English.
                - Reviews can be quoted in their original language, but the surrounding explanation must be English.
                
                 -------------------------------DATA-------------------------
                 """ + a],
    "llmConfig": {
        "max_new_tokens": 4096,
        "seed": None,
        "top_k": 14,
        "top_p": 0.94,
        "temperature": 0.01,
        "repetition_penalty": 1.04
    },
    "isStream": False,
    "systemPrompt":"""
    # Instructions
    - Analyze the NPS data and provide a summary.
    - ALL OUTPUT MUST BE IN ENGLISH. Do not provide Korean output under any circumstances.
    - Format using Markdown.
    - Do not include anything in the output except the analysis results.
    """
    }

    api_endpoint_url = f"{ENDPOINT_URL}/openapi/chat/v1/messages"

    response=requests.post(
        api_endpoint_url,
        headers=headers,
        json=body
    )
    return response.json()["content"]

    
def sm_local(a):
    body = {
    "modelIds": [YOUR_MODEL_ID],
    "contents": ["""
                 
Analyze the following NPS data and provide feedback.
- ALL OUTPUT (including headers, categories, and analysis) MUST BE IN ENGLISH.
- DO NOT use Korean in the output, even if the input data is in Korean.
- Quote customer feedback in its original language, but all other parts must be English.
                 -------------------------------DATA-------------------------
                 """ + a],
    "llmConfig": {
        "max_new_tokens": 4096,
        "seed": None,
        "top_k": 14,
        "top_p": 0.94,
        "temperature": 0.01,
        "repetition_penalty": 1.04
    },
    "isStream": False,
    "systemPrompt":"""
# Role
- You are an expert in NPS and customer feedback analysis.

# Output Language Policy
- EVERY PART of the response must be in ENGLISH.
- This includes Markdown headers, category names, and feedback analysis.
- DO NOT translate the output to Korean even if the input feedback is Korean.

# Output Requirements
- Provide only the feedback and analysis results.
- Format the output using Markdown.
- Use the following structure:
{
## Analysis Results
## Declined Categories and Improvement Plans
## Conclusion
}
    """
    }

    api_endpoint_url = f"{ENDPOINT_URL}/openapi/chat/v1/messages"

    response=requests.post(
        api_endpoint_url,
        headers=headers,
        json=body
    )
    return response.json()["content"]
